<!DOCTYPE HTML>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="height=device-height, initial-scale=1.0">
    <meta content="text/css">
    <title>Мой кальк</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
	<a href="https://igor7857.github.io/toexch">перевод голд</a>
    <div id="form_1" class="forma">
        <p style="display: inline"><input class="ch" type="checkbox" id="i_chb" oninput="tt()" style="margin-top: 5px;">право неожиданности</p>
        <p id="сь" style="display: none;">чм на акке</p>
        <input type="number" id="i_чм_на_акке" min="1" oninput="tt()">
        <p id="скр" style="display: none;">цена товара в чм</p>
        <input type="number" id="i_цена_товара_в_чм_1" min="0" value="129" oninput="tt()">
        <div class="bt_i">
            <button onclick="op('i_цена_товара_в_чм_1', -15, 0)">-15</button>
            <button onclick="op('i_цена_товара_в_чм_1', -5, 0)">-5</button>
            <button onclick="op('i_цена_товара_в_чм_1', -1, 0)">-1</button>
            <button onclick="op('i_цена_товара_в_чм_1', +1, 0)">+1</button>
            <button onclick="op('i_цена_товара_в_чм_1', +5, 0)">+5</button>
            <button onclick="op('i_цена_товара_в_чм_1', +15, 0)">+15</button>
        </div>
        <br id="br" style="display: none">
        <p id="ыть" style="display: none;">единиц товара</p>
        <input type="number" id="i_единиц_товара_1" min="0" value="1" oninput="tt()">
        <div class="bt_i">
            <button onclick="op('i_единиц_товара_1', -5, 0)">-5</button>
            <button onclick="op('i_единиц_товара_1', -1, 0)">-1</button>
            <button onclick="op('i_единиц_товара_1', +1, 0)">+1</button>
            <button onclick="op('i_единиц_товара_1', +5, 0)">+5</button>
        </div>
    </div>

    <div>
        <button id="шаг1" onclick="шаг1()" style="display: block">+</button>
    </div>

    <div id="form_2" class="forma" style="display: none">
    <input placeholder="цена товара в чм" type="number" id="i_цена_товара_в_чм_2" min="0" oninput="tt()">
    <div class="bt_i">
            <button onclick="op('i_цена_товара_в_чм_2', -15, 0)">-15</button>
            <button onclick="op('i_цена_товара_в_чм_2', -5, 0)">-5</button>
            <button onclick="op('i_цена_товара_в_чм_2', -1, 0)">-1</button>
            <button onclick="op('i_цена_товара_в_чм_2', +1, 0)">+1</button>
            <button onclick="op('i_цена_товара_в_чм_2', +5, 0)">+5</button>
            <button onclick="op('i_цена_товара_в_чм_2', +15, 0)">+15</button>
        </div>
        <br>
    <input placeholder="единиц товара" type="number" id="i_единиц_товара_2" min="0" oninput="tt()">
        <div class="bt_i">
            <button onclick="op('i_единиц_товара_2', -5, 0)">-5</button>
            <button onclick="op('i_единиц_товара_2', -1, 0)">-1</button>
            <button onclick="op('i_единиц_товара_2', +1, 0)">+1</button>
            <button onclick="op('i_единиц_товара_2', +5, 0)">+5</button>
        </div>
    </div>

    <div>
        <button id="шаг2" onclick="шаг2()" style="display: none">+</button>
    </div>

    <div id="form_3" class="forma" style="display: none">
    <input placeholder="цена товара в чм" type="number" id="i_цена_товара_в_чм_3" min="0" oninput="tt()">
    <div class="bt_i">
            <button onclick="op('i_цена_товара_в_чм_3', -15, 0)">-15</button>
            <button onclick="op('i_цена_товара_в_чм_3', -5, 0)">-5</button>
            <button onclick="op('i_цена_товара_в_чм_3', -1, 0)">-1</button>
            <button onclick="op('i_цена_товара_в_чм_3', +1, 0)">+1</button>
            <button onclick="op('i_цена_товара_в_чм_3', +5, 0)">+5</button>
            <button onclick="op('i_цена_товара_в_чм_3', +15, 0)">+15</button>
        </div>
        <br>
    <input placeholder="единиц товара" type="number" id="i_единиц_товара_3" min="0" oninput="tt()">
        <div class="bt_i">
            <button onclick="op('i_единиц_товара_3', -5, 0)">-5</button>
            <button onclick="op('i_единиц_товара_3', -1, 0)">-1</button>
            <button onclick="op('i_единиц_товара_3', +1, 0)">+1</button>
            <button onclick="op('i_единиц_товара_3', +5, 0)">+5</button>
        </div>
    </div>

    <div class="forma" style="text-align: right;">
        <p style="display: inline;" id="vRub">руб</p><button style="margin-left: 10px;" onclick="copy1('i_1', 'vRub')">copy</button><br>
        <p style="display: inline;" id="vRaG">руб+голд</p><button style="margin-left: 10px;" onclick="copy1('i_1', 'vRaG')">copy</button><br>
        <br>
        <p style="display: inline;" id="vВсегоЧМ">чм</p><button style="margin-left: 10px;" onclick="copy2('i_1', 'vВсегоЧМ')">copy</button>
        <p id="vОстЧМ"></p>
        <input type="text" id="i_1" style="width: 100%;">
    </div>

    <script>
        document.getElementById("i_чм_на_акке").value = "";
        document.getElementById("i_единиц_товара_2").value = "";
        document.getElementById("i_цена_товара_в_чм_2").value = "";
        document.getElementById("i_единиц_товара_3").value = "";
        document.getElementById("i_цена_товара_в_чм_3").value = "";
        tt();
        function tt(){
            let курс = 0.12;

            let ЕТ_1 = document.getElementById("i_единиц_товара_1").value;
            if (ЕТ_1.length == 0) {ЕТ_1 = 0};
            let ЦТ_1 = document.getElementById("i_цена_товара_в_чм_1").value;
            if (ЦТ_1.length == 0) {ЦТ_1 = 0};

            let ЕТ_2 = document.getElementById("i_единиц_товара_2").value;
            if (ЕТ_2.length == 0) {ЕТ_2 = 0};
            let ЦТ_2 = document.getElementById("i_цена_товара_в_чм_2").value;
            if (ЦТ_2.length == 0) {ЦТ_2 = 0};

            let ЕТ_3 = document.getElementById("i_единиц_товара_3").value;
            if (ЕТ_3.length == 0) {ЕТ_3 = 0};
            let ЦТ_3 = document.getElementById("i_цена_товара_в_чм_3").value;
            if (ЦТ_3.length == 0) {ЦТ_3 = 0};


            let всего_чм = (ЕТ_1*ЦТ_1)+(ЕТ_2*ЦТ_2)+(ЕТ_3*ЦТ_3);
            let rub = всего_чм * курс;
            rub = fix_rub(rub);
            let gold = всего_чм * 60;
            let goldfix = gold / 100;
            goldfix = Math.floor(goldfix);
            goldfix = goldfix * 100;

            document.getElementById("vRub").innerHTML = rub + " руб";
            document.getElementById("vВсегоЧМ").innerHTML = всего_чм + " чм" + " = " + gold + " голд";
            let Rg = 3500 / 30750 * всего_чм;
            Rg = fix_Rg(Rg)
            let rG = (rub - Rg)
            rG = fix_rG(rG);
            document.getElementById("vRaG").innerHTML = Rg + ` руб + ` + rG + ` голд`;
            let чм_на_акке = document.getElementById("i_чм_на_акке").value;
            let остЧМ = чм_на_акке - всего_чм;
            document.getElementById("vОстЧМ").innerHTML = "останется " + остЧМ + " чм";

            let razn = rub - Rg

            let ch = document.getElementById("i_chb");
            if (ch.checked) {
                rub = rub - razn;
                document.getElementById("vRub").innerHTML = rub + " руб";
            }
        }

        function op (i, n, temp){
            temp = Number(document.getElementById(i).value);
            document.getElementById(i).value = n+temp;
            if (document.getElementById(i).value < 0) {document.getElementById(i).value = 0};
            tt()
        }

        function fix_rub(a){
            a = a.toFixed(2);
            if (a >= 50) {a = Math.floor(a);}
            if (a < 50) {
                a = a * 10;
                a = Math.ceil(a);
                a = a / 10;
                a = a.toFixed(2);
            }
            return a;
        }

        function fix_Rg(a){
            if (a < 50) {
                a = a * 10;
                a = Math.ceil(a);
                a = a / 10;
                a = a.toFixed(2);
            }
            if (a >= 50) {a = Math.ceil(a);}
            return a;
        }

        function fix_rG(a){
            a = a.toFixed(2);
            a = a * 5 * 100;
            return a;
        }
        function copy1(aaa, bbb){
            let temp = document.getElementById(bbb).innerHTML;
            document.getElementById(aaa).value = "можешь переводить " + temp;
            let copyText = document.getElementById(aaa);
            copyText.select();
            document.execCommand("copy")
        }
        function copy2(aaa, bbb){
            let temp = document.getElementById(bbb).innerHTML;
            document.getElementById(aaa).value = "" + temp;
            let copyText = document.getElementById(aaa);
            copyText.select();
            document.execCommand("copy")
        }

        function шаг1(){
            document.getElementById('сь').style.display = 'none';
            document.getElementById('скр').style.display = 'none';
            document.getElementById('ыть').style.display = 'none';
            document.getElementById('br').style.display = 'block';
            document.getElementById('form_2').style.display = 'block';
            document.getElementById('шаг2').style.display = 'block';
            document.getElementById('шаг1').style.display = 'none';
        }
        function шаг2(){
            document.getElementById('form_3').style.display = 'block';
            document.getElementById('шаг2').style.display = 'none';
        }
    </script>
</body>
</html>
